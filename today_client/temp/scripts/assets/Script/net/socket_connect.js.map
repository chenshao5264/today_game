{"version":3,"sources":["assets/Script/net/socket_connect.js"],"names":["smsg","require","cc","Class","ctor","closeConnect","_socket","disconnect","makeConnect","url","stage","opts","console","log","socket","io","connect","on","data","onConnected","onDisconnect","onMessage"],"mappings":";;;;;;AACA,IAAIA,OAAOC,QAAQ,cAAR,CAAX;;AAEAC,GAAGC,KAAH,CAAS;AACLC,UAAM,gBAAW,CAEhB,CAHI;;AAKLC,kBAAc,wBAAW;AACrB,YAAI,KAAKC,OAAT,EAAkB;AACd,iBAAKA,OAAL,CAAaC,UAAb;AACA,iBAAKD,OAAL,GAAe,IAAf;AACH;AACJ,KAVI;;AAYLE,iBAAa,qBAASC,GAAT,EAAcC,KAAd,EAAqB;AAC9B,YAAIC,OAAO;AACP,4BAAgB,KADT;AAEP,oCAAwB,IAFjB;AAGP,0BAAa,CAAC,WAAD,EAAc,SAAd;AAHN,SAAX;;AAMAC,gBAAQC,GAAR,CAAY,kBAAkBJ,GAA9B;AACA,YAAIK,SAASC,GAAGC,OAAH,CAAWP,GAAX,EAAgBE,IAAhB,CAAb;;AAEAG,eAAOG,EAAP,CAAU,SAAV,EAAqB,UAASC,IAAT,EAAe;AAChClB,iBAAKmB,WAAL,CAAiBD,IAAjB,EAAuBR,KAAvB;AACH,SAFD;;AAIAI,eAAOG,EAAP,CAAU,YAAV,EAAwB,UAASC,IAAT,EAAe;AACnClB,iBAAKoB,YAAL,CAAkBF,IAAlB,EAAwBR,KAAxB;AACH,SAFD;;AAIAI,eAAOG,EAAP,CAAU,SAAV,EAAqB,UAASC,IAAT,EAAe;AAChClB,iBAAKqB,SAAL,CAAeH,IAAf;AACH,SAFD;;AAIA,eAAOJ,MAAP;AACH;AAnCI,CAAT","file":"unknown","sourcesContent":["\nvar smsg = require(\"./socket_msg\");\n\ncc.Class({\n    ctor: function() {\n\n    },\n\n    closeConnect: function() {\n        if (this._socket) {\n            this._socket.disconnect();\n            this._socket = null;\n        }\n    },\n\n    makeConnect: function(url, stage) {\n        var opts = {\n            'reconnection': false,\n            'force new connection': true,\n            'transports':['websocket', 'polling']\n        }\n\n        console.log(\"connect url: \" + url);\n        var socket = io.connect(url, opts);\n\n        socket.on(\"connect\", function(data) {\n            smsg.onConnected(data, stage);\n        });\n\n        socket.on(\"disconnect\", function(data) {\n            smsg.onDisconnect(data, stage);\n        });\n\n        socket.on(\"message\", function(data) {\n            smsg.onMessage(data);\n        });\n\n        return socket;\n    }\n});\n\n"]}